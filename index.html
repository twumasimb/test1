<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Recipe Sharing - Find and Share Your Favorite Recipes</title>
    <style>
        /* Base styles with accessibility in mind */
        :root {
            --primary-color: #2c6e49;
            --secondary-color: #4c956c;
            --accent-color: #fefee3;
            --text-color: #333333;
            --light-bg: #f8f9fa;
            --error-color: #d62828;
            --focus-color: #0066cc;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Ensure all interactive elements have visible focus indicators */
        button:focus, input:focus, select:focus, textarea:focus, a:focus, [tabindex]:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        /* High contrast focus for dark backgrounds */
        .dark-bg button:focus, .dark-bg a:focus {
            outline: 3px solid #ffffff;
        }

        /* Skip link for keyboard users */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header styles */
        header {
            padding: 20px 0;
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        h2 {
            color: var(--primary-color);
            margin: 25px 0 15px;
            font-size: 1.8rem;
        }

        h3 {
            color: var(--secondary-color);
            margin: 20px 0 10px;
            font-size: 1.4rem;
        }

        p {
            margin-bottom: 15px;
        }

        /* Form styles */
        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }

        .required-field::after {
            content: " *";
            color: var(--error-color);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--secondary-color);
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Error message styles */
        .error-message {
            color: var(--error-color);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        /* Recipe card styles */
        .recipe-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .recipe-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background-color: var(--light-bg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .recipe-card h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .recipe-meta {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 0.9rem;
            color: #666;
        }

        /* Rating stars */
        .rating {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .rating-label {
            margin-right: 10px;
        }

        .stars {
            display: inline-flex;
        }

        .star {
            color: #ddd;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.filled {
            color: #ffc107;
        }

        /* Tabs for recipe form and search */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .tab {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: bold;
            color: var(--text-color);
        }

        .tab.active {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Ingredient tags */
        .ingredient-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .ingredient-tag {
            background-color: var(--secondary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* Search results message */
        .search-results-message {
            margin: 20px 0;
            font-style: italic;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .recipe-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
        }

        /* Footer styles */
        footer {
            margin-top: 50px;
            padding: 20px 0;
            border-top: 1px solid #e0e0e0;
            text-align: center;
            color: #666;
        }

        /* Visually hidden elements for screen readers */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header>
        <h1>Community Recipe Sharing</h1>
        <p>Find and share your favorite recipes with our community</p>
    </header>
    
    <main id="main-content">
        <div class="tabs" role="tablist">
            <button id="search-tab" class="tab active" role="tab" aria-selected="true" aria-controls="search-content" tabindex="0">Search Recipes</button>
            <button id="add-tab" class="tab" role="tab" aria-selected="false" aria-controls="add-content" tabindex="0">Add Recipe</button>
        </div>
        
        <section id="search-content" class="tab-content active" role="tabpanel" aria-labelledby="search-tab">
            <h2>Find Recipes</h2>
            
            <form id="search-form" aria-label="Recipe search form">
                <div class="form-group">
                    <label for="search-ingredient">Search by ingredient:</label>
                    <input type="text" id="search-ingredient" name="search-ingredient" placeholder="e.g., chicken, tomato, pasta">
                </div>
                
                <button type="submit" id="search-button">Search Recipes</button>
            </form>
            
            <div id="search-results-message" class="search-results-message" aria-live="polite"></div>
            
            <div id="recipe-container" class="recipe-container" aria-live="polite">
                <!-- Recipe cards will be dynamically added here -->
            </div>
        </section>
        
        <section id="add-content" class="tab-content" role="tabpanel" aria-labelledby="add-tab">
            <h2>Share Your Recipe</h2>
            
            <form id="recipe-form" aria-label="Recipe submission form">
                <div class="form-group">
                    <label for="recipe-title" class="required-field">Recipe Title</label>
                    <input type="text" id="recipe-title" name="recipe-title" required aria-required="true">
                    <div id="title-error" class="error-message" aria-live="polite"></div>
                </div>
                
                <div class="form-group">
                    <label for="recipe-author" class="required-field">Your Name</label>
                    <input type="text" id="recipe-author" name="recipe-author" required aria-required="true">
                    <div id="author-error" class="error-message" aria-live="polite"></div>
                </div>
                
                <div class="form-group">
                    <label for="recipe-ingredients" class="required-field">Ingredients (one per line)</label>
                    <textarea id="recipe-ingredients" name="recipe-ingredients" rows="5" required aria-required="true" aria-describedby="ingredients-desc"></textarea>
                    <div id="ingredients-desc" class="sr-only">List each ingredient on a new line, including quantity and unit (e.g., 2 cups flour)</div>
                    <div id="ingredients-error" class="error-message" aria-live="polite"></div>
                </div>
                
                <div class="form-group">
                    <label for="recipe-instructions" class="required-field">Instructions</label>
                    <textarea id="recipe-instructions" name="recipe-instructions" rows="8" required aria-required="true"></textarea>
                    <div id="instructions-error" class="error-message" aria-live="polite"></div>
                </div>
                
                <div class="form-group">
                    <label for="recipe-time">Cooking Time (minutes)</label>
                    <input type="number" id="recipe-time" name="recipe-time" min="1" max="1440">
                </div>
                
                <div class="form-group">
                    <label for="recipe-difficulty">Difficulty Level</label>
                    <select id="recipe-difficulty" name="recipe-difficulty">
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
                
                <button type="submit" id="submit-recipe">Submit Recipe</button>
            </form>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2023 Community Recipe Sharing. All recipes contributed by our amazing community.</p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample recipes for demonstration
            const sampleRecipes = [
                {
                    id: 1,
                    title: 'Classic Spaghetti Carbonara',
                    author: 'Chef Maria',
                    ingredients: ['200g spaghetti', '100g pancetta or bacon', '2 large eggs', '50g Pecorino Romano cheese', '50g Parmesan cheese', 'Black pepper', 'Salt'],
                    instructions: 'Cook pasta until al dente. Meanwhile, fry the pancetta until crispy. Beat eggs with grated cheeses. Drain pasta, add to pancetta, remove from heat and quickly stir in egg mixture. The residual heat will cook the eggs into a creamy sauce. Season with pepper and serve immediately.',
                    time: 25,
                    difficulty: 'medium',
                    rating: 4
                },
                {
                    id: 2,
                    title: 'Vegetable Stir Fry',
                    author: 'Healthy Eats',
                    ingredients: ['1 bell pepper', '1 carrot', '1 broccoli head', '100g snow peas', '2 tbsp soy sauce', '1 tbsp sesame oil', '2 cloves garlic', '1 tbsp ginger'],
                    instructions: 'Slice all vegetables. Heat oil in a wok, add garlic and ginger. Add vegetables and stir fry for 5-7 minutes. Add soy sauce and continue cooking for 2 minutes. Serve hot with rice or noodles.',
                    time: 15,
                    difficulty: 'easy',
                    rating: 5
                },
                {
                    id: 3,
                    title: 'Chocolate Chip Cookies',
                    author: 'Sweet Treats',
                    ingredients: ['250g flour', '150g butter', '150g brown sugar', '100g white sugar', '1 egg', '1 tsp vanilla extract', '200g chocolate chips', '1/2 tsp baking soda', 'Pinch of salt'],
                    instructions: 'Cream butter and sugars. Add egg and vanilla. Mix in dry ingredients. Fold in chocolate chips. Drop spoonfuls onto baking sheet. Bake at 180°C for 10-12 minutes until golden brown.',
                    time: 30,
                    difficulty: 'easy',
                    rating: 5
                }
            ];
            
            // Initialize the page with sample recipes
            displayRecipes(sampleRecipes);
            
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', handleTabInteraction);
                tab.addEventListener('keydown', handleTabInteraction);
            });
            
            function handleTabInteraction(event) {
                // Handle both mouse and keyboard events
                if (event.type === 'click' || 
                    (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' '))) {
                    
                    if (event.type === 'keydown') {
                        event.preventDefault(); // Prevent scrolling on space key
                    }
                    
                    // Remove active class from all tabs and tab contents
                    tabs.forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab and corresponding content
                    event.currentTarget.classList.add('active');
                    event.currentTarget.setAttribute('aria-selected', 'true');
                    
                    const targetId = event.currentTarget.getAttribute('aria-controls');
                    document.getElementById(targetId).classList.add('active');
                }
            }
            
            // Recipe form submission
            const recipeForm = document.getElementById('recipe-form');
            
            recipeForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                // Reset error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.textContent = '';
                });
                
                // Validate form
                let isValid = true;
                
                const title = document.getElementById('recipe-title').value.trim();
                if (!title) {
                    document.getElementById('title-error').textContent = 'Please enter a recipe title';
                    isValid = false;
                }
                
                const author = document.getElementById('recipe-author').value.trim();
                if (!author) {
                    document.getElementById('author-error').textContent = 'Please enter your name';
                    isValid = false;
                }
                
                const ingredients = document.getElementById('recipe-ingredients').value.trim();
                if (!ingredients) {
                    document.getElementById('ingredients-error').textContent = 'Please enter the ingredients';
                    isValid = false;
                }
                
                const instructions = document.getElementById('recipe-instructions').value.trim();
                if (!instructions) {
                    document.getElementById('instructions-error').textContent = 'Please enter the cooking instructions';
                    isValid = false;
                }
                
                if (!isValid) {
                    return;
                }
                
                // Create new recipe object
                const newRecipe = {
                    id: Date.now(), // Use timestamp as unique ID
                    title: title,
                    author: author,
                    ingredients: ingredients.split('\n').filter(item => item.trim() !== ''),
                    instructions: instructions,
                    time: document.getElementById('recipe-time').value || 0,
                    difficulty: document.getElementById('recipe-difficulty').value,
                    rating: 0 // New recipes start with no rating
                };
                
                // Add to sample recipes
                sampleRecipes.unshift(newRecipe);
                
                // Display updated recipes
                displayRecipes(sampleRecipes);
                
                // Reset form
                recipeForm.reset();
                
                // Switch to search tab to show the new recipe
                document.getElementById('search-tab').click();
                
                // Show confirmation message
                const searchResultsMessage = document.getElementById('search-results-message');
                searchResultsMessage.textContent = 'Your recipe has been added successfully!';
                setTimeout(() => {
                    searchResultsMessage.textContent = '';
                }, 5000);
            });
            
            // Search functionality
            const searchForm = document.getElementById('search-form');
            
            searchForm.addEventListener('submit', function(event) {
                event.preventDefault();
                
                const searchTerm = document.getElementById('search-ingredient').value.trim().toLowerCase();
                const searchResultsMessage = document.getElementById('search-results-message');
                
                if (!searchTerm) {
                    // If search is empty, show all recipes
                    displayRecipes(sampleRecipes);
                    searchResultsMessage.textContent = '';
                    return;
                }
                
                // Filter recipes by ingredient
                const filteredRecipes = sampleRecipes.filter(recipe => {
                    return recipe.ingredients.some(ingredient => 
                        ingredient.toLowerCase().includes(searchTerm)
                    );
                });
                
                // Display results
                if (filteredRecipes.length > 0) {
                    displayRecipes(filteredRecipes);
                    searchResultsMessage.textContent = `Found ${filteredRecipes.length} recipe(s) containing "${searchTerm}"`;
                } else {
                    displayRecipes([]);
                    searchResultsMessage.textContent = `No recipes found containing "${searchTerm}"`;
                }
            });
            
            // Function to display recipes
            function displayRecipes(recipes) {
                const recipeContainer = document.getElementById('recipe-container');
                recipeContainer.innerHTML = '';
                
                recipes.forEach(recipe => {
                    const recipeCard = document.createElement('article');
                    recipeCard.className = 'recipe-card';
                    recipeCard.setAttribute('aria-labelledby', `recipe-title-${recipe.id}`);
                    
                    // Create recipe title
                    const recipeTitle = document.createElement('h3');
                    recipeTitle.id = `recipe-title-${recipe.id}`;
                    recipeTitle.textContent = recipe.title;
                    
                    // Create recipe meta information
                    const recipeMeta = document.createElement('div');
                    recipeMeta.className = 'recipe-meta';
                    
                    const authorSpan = document.createElement('span');
                    authorSpan.textContent = `By: ${recipe.author}`;
                    
                    const difficultySpan = document.createElement('span');
                    difficultySpan.textContent = `Difficulty: ${recipe.difficulty.charAt(0).toUpperCase() + recipe.difficulty.slice(1)}`;
                    
                    const timeSpan = document.createElement('span');
                    timeSpan.textContent = `${recipe.time} min`;
                    
                    recipeMeta.appendChild(authorSpan);
                    recipeMeta.appendChild(difficultySpan);
                    recipeMeta.appendChild(timeSpan);
                    
                    // Create rating stars
                    const ratingDiv = document.createElement('div');
                    ratingDiv.className = 'rating';
                    ratingDiv.setAttribute('aria-label', `Rating: ${recipe.rating} out of 5 stars`);
                    
                    const ratingLabel = document.createElement('span');
                    ratingLabel.className = 'rating-label';
                    ratingLabel.textContent = 'Rating:';
                    
                    const starsDiv = document.createElement('div');
                    starsDiv.className = 'stars';
                    starsDiv.setAttribute('data-recipe-id', recipe.id);
                    
                    for (let i = 1; i <= 5; i++) {
                        const star = document.createElement('span');
                        star.className = i <= recipe.rating ? 'star filled' : 'star';
                        star.textContent = '★';
                        star.setAttribute('data-value', i);
                        star.setAttribute('tabindex', '0');
                        star.setAttribute('role', 'button');
                        star.setAttribute('aria-label', `Rate ${i} star${i !== 1 ? 's' : ''}`);
                        
                        // Add event listeners for rating
                        star.addEventListener('click', handleRatingInteraction);
                        star.addEventListener('keydown', handleRatingInteraction);
                        
                        starsDiv.appendChild(star);
                    }
                    
                    ratingDiv.appendChild(ratingLabel);
                    ratingDiv.appendChild(starsDiv);
                    
                    // Create ingredients section
                    const ingredientsHeading = document.createElement('h4');
                    ingredientsHeading.textContent = 'Ingredients:';
                    
                    const ingredientsList = document.createElement('ul');
                    recipe.ingredients.forEach(ingredient => {
                        const listItem = document.createElement('li');
                        listItem.textContent = ingredient;
                        ingredientsList.appendChild(listItem);
                    });
                    
                    // Create ingredient tags for visual interest
                    const ingredientTags = document.createElement('div');
                    ingredientTags.className = 'ingredient-tags';
                    
                    // Extract main ingredients for tags (first 3)
                    const mainIngredients = recipe.ingredients.slice(0, 3).map(ing => {
                        // Extract just the ingredient name without quantities
                        const parts = ing.split(' ');
                        return parts.length > 1 ? parts.slice(1).join(' ') : ing;
                    });
                    
                    mainIngredients.forEach(ing => {
                        const tag = document.createElement('span');
                        tag.className = 'ingredient-tag';
                        tag.textContent = ing;
                        ingredientTags.appendChild(tag);
                    });
                    
                    // Create instructions section
                    const instructionsHeading = document.createElement('h4');
                    instructionsHeading.textContent = 'Instructions:';
                    
                    const instructionsPara = document.createElement('p');
                    instructionsPara.textContent = recipe.instructions;
                    
                    // Assemble the recipe card
                    recipeCard.appendChild(recipeTitle);
                    recipeCard.appendChild(recipeMeta);
                    recipeCard.appendChild(ratingDiv);
                    recipeCard.appendChild(ingredientTags);
                    recipeCard.appendChild(ingredientsHeading);
                    recipeCard.appendChild(ingredientsList);
                    recipeCard.appendChild(instructionsHeading);
                    recipeCard.appendChild(instructionsPara);
                    
                    recipeContainer.appendChild(recipeCard);
                });
            }
            
            // Function to handle rating interactions
            function handleRatingInteraction(event) {
                // Handle both mouse and keyboard events
                if (event.type === 'click' || 
                    (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' '))) {
                    
                    if (event.type === 'keydown') {
                        event.preventDefault(); // Prevent scrolling on space key
                    }
                    
                    const star = event.currentTarget;
                    const ratingValue = parseInt(star.getAttribute('data-value'));
                    const recipeId = parseInt(star.parentElement.getAttribute('data-recipe-id'));
                    
                    // Update the recipe rating
                    const recipe = sampleRecipes.find(r => r.id === recipeId);
                    if (recipe) {
                        recipe.rating = ratingValue;
                        
                        // Update the visual stars
                        const stars = star.parentElement.querySelectorAll('.star');
                        stars.forEach((s, index) => {
                            if (index < ratingValue) {
                                s.classList.add('filled');
                            } else {
                                s.classList.remove('filled');
                            }
                        });
                        
                        // Update the aria-label for screen readers
                        star.parentElement.parentElement.setAttribute('aria-label', `Rating: ${ratingValue} out of 5 stars`);
                    }
                }
            }
        });
    </script>
</body>
</html>
