<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Events - Discover What's Happening Near You</title>
    <style>
        /* CSS Reset and Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Accessibility: Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #0066cc;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header Styles */
        header {
            padding: 20px 0;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .site-title {
            font-size: 1.8rem;
            color: #0066cc;
            text-decoration: none;
            font-weight: bold;
        }

        /* Navigation Styles */
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: #333;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav a:hover, nav a:focus {
            background-color: #e9ecef;
            text-decoration: underline;
        }

        /* Main Content Styles */
        main {
            padding: 20px 0;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: #333;
        }

        h2 {
            font-size: 1.8rem;
            margin: 30px 0 15px;
            color: #333;
        }

        h3 {
            font-size: 1.3rem;
            margin: 20px 0 10px;
            color: #333;
        }

        /* Filter Section */
        .filters {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .filter-form {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: flex-end;
        }

        .filter-group {
            flex: 1 1 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        select, input, button {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 1rem;
        }

        button {
            background-color: #0066cc;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s;
        }

        button:hover, button:focus {
            background-color: #0056b3;
        }

        /* Ensure all interactive elements have visible focus indicators */
        button:focus, input:focus, select:focus, textarea:focus, a:focus {
            outline: 3px solid #0066cc;
            outline-offset: 2px;
        }

        /* Events Grid */
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .event-card {
            background-color: #ffffff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .event-card:hover, .event-card:focus-within {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .event-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .event-details {
            padding: 20px;
        }

        .event-category {
            display: inline-block;
            background-color: #e9ecef;
            color: #495057;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .event-title {
            margin: 10px 0;
            font-size: 1.3rem;
        }

        .event-info {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            color: #6c757d;
        }

        .event-info svg {
            margin-right: 8px;
            flex-shrink: 0;
        }

        .event-description {
            margin: 15px 0;
        }

        .event-link {
            display: inline-block;
            margin-top: 10px;
            color: #0066cc;
            text-decoration: none;
            font-weight: 500;
        }

        .event-link:hover, .event-link:focus {
            text-decoration: underline;
        }

        /* Map Section */
        .map-section {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .map-container {
            height: 400px;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
            border: 1px solid #ced4da;
        }

        /* No Events Message */
        .no-events {
            text-align: center;
            padding: 40px;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Footer Styles */
        footer {
            background-color: #ffffff;
            padding: 30px 0;
            margin-top: 40px;
            border-top: 1px solid #e9ecef;
            text-align: center;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .footer-links {
            display: flex;
            list-style: none;
            gap: 20px;
            margin: 20px 0;
        }

        .footer-links a {
            color: #0066cc;
            text-decoration: none;
        }

        .footer-links a:hover, .footer-links a:focus {
            text-decoration: underline;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .site-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            nav ul {
                flex-direction: column;
                gap: 10px;
            }

            .filter-form {
                flex-direction: column;
            }

            .events-grid {
                grid-template-columns: 1fr;
            }
        }

        /* High contrast mode support */
        @media (prefers-contrast: more) {
            body {
                color: #000;
                background-color: #fff;
            }
            
            .event-card, .filters, .map-section {
                border: 2px solid #000;
            }
            
            button {
                background-color: #000;
                color: #fff;
                border: 2px solid #000;
            }
        }

        /* Loading indicator */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            margin: 0 auto;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: #0066cc;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Accessibility: Focus visible utility class */
        .focus-visible:focus {
            outline: 3px solid #0066cc;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header>
        <div class="site-header">
            <a href="#" class="site-title">Local Events</a>
            <nav role="navigation" aria-label="Main navigation">
                <ul>
                    <li><a href="#" aria-current="page">Home</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#map">Map</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main id="main-content">
        <h1>Discover Local Events Near You</h1>
        
        <section class="filters" aria-labelledby="filter-heading">
            <h2 id="filter-heading">Filter Events</h2>
            <form class="filter-form" id="filter-form">
                <div class="filter-group">
                    <label for="category">Category</label>
                    <select id="category" name="category">
                        <option value="">All Categories</option>
                        <option value="music">Music</option>
                        <option value="arts">Arts & Theater</option>
                        <option value="food">Food & Drink</option>
                        <option value="sports">Sports</option>
                        <option value="community">Community</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label for="date">Date</label>
                    <input type="date" id="date" name="date">
                </div>
                
                <div class="filter-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" placeholder="Enter city or zip code">
                </div>
                
                <div class="filter-group">
                    <button type="submit" id="filter-button">Apply Filters</button>
                </div>
            </form>
        </section>

        <!-- Loading indicator -->
        <div class="loading" id="loading" aria-live="polite">
            <div class="spinner" aria-hidden="true"></div>
            <p>Loading events...</p>
        </div>
        
        <section id="events" aria-labelledby="events-heading">
            <h2 id="events-heading">Upcoming Events</h2>
            <div class="events-grid" id="events-container">
                <!-- Events will be dynamically inserted here -->
            </div>
        </section>
        
        <section id="map" class="map-section" aria-labelledby="map-heading">
            <h2 id="map-heading">Event Locations</h2>
            <p>Explore event venues on the map below. Click on a marker to see event details.</p>
            <div id="map-container" class="map-container" aria-label="Map showing event locations">
                <!-- Map will be inserted here -->
            </div>
        </section>
        
        <section id="about" aria-labelledby="about-heading">
            <h2 id="about-heading">About Local Events</h2>
            <p>Welcome to Local Events, your go-to resource for discovering exciting happenings in your area. Our platform showcases a diverse range of events from concerts and art exhibitions to food festivals and community gatherings.</p>
            <p>We strive to connect people with enriching experiences and help local organizers reach their audience. Browse through our curated list of events, filter by your interests, and use the interactive map to find venues near you.</p>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2023 Local Events. All rights reserved.</p>
            <ul class="footer-links">
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms of Service</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Accessibility Statement</a></li>
            </ul>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample event data - in a real application, this would come from an API
            const eventsData = [
                {
                    id: 1,
                    title: "Summer Music Festival",
                    category: "music",
                    date: "2023-07-15",
                    time: "16:00",
                    location: "Central Park",
                    address: "5th Ave, New York, NY 10022",
                    description: "Join us for a day of amazing live performances featuring local and national artists across three stages.",
                    image: "https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7812, lng: -73.9665 }
                },
                {
                    id: 2,
                    title: "Farmers Market",
                    category: "food",
                    date: "2023-07-08",
                    time: "09:00",
                    location: "Downtown Square",
                    address: "123 Main St, Anytown, USA",
                    description: "Shop for fresh, locally grown produce, artisanal foods, and handcrafted goods from over 50 vendors.",
                    image: "https://images.unsplash.com/photo-1488459716781-31db52582fe9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7580, lng: -73.9855 }
                },
                {
                    id: 3,
                    title: "Art Exhibition Opening",
                    category: "arts",
                    date: "2023-07-20",
                    time: "18:30",
                    location: "Modern Art Gallery",
                    address: "456 Gallery Way, Anytown, USA",
                    description: "Be among the first to experience this groundbreaking exhibition featuring works from emerging local artists.",
                    image: "https://images.unsplash.com/photo-1531058020387-3be344556be6?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7484, lng: -73.9857 }
                },
                {
                    id: 4,
                    title: "Charity 5K Run",
                    category: "sports",
                    date: "2023-07-22",
                    time: "08:00",
                    location: "Riverside Park",
                    address: "789 River Rd, Anytown, USA",
                    description: "Run or walk to support local children's hospitals. Registration includes t-shirt and post-race refreshments.",
                    image: "https://images.unsplash.com/photo-1452626038306-9aae5e071dd1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7735, lng: -73.9712 }
                },
                {
                    id: 5,
                    title: "Community Garden Workshop",
                    category: "community",
                    date: "2023-07-10",
                    time: "10:00",
                    location: "Community Center",
                    address: "321 Oak St, Anytown, USA",
                    description: "Learn sustainable gardening techniques and help plant our new community vegetable garden. Tools provided.",
                    image: "https://images.unsplash.com/photo-1466692476868-aef1dfb1e735?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7635, lng: -73.9787 }
                },
                {
                    id: 6,
                    title: "Jazz Night",
                    category: "music",
                    date: "2023-07-14",
                    time: "20:00",
                    location: "Blue Note Club",
                    address: "131 W 3rd St, New York, NY 10012",
                    description: "An evening of smooth jazz featuring acclaimed local musicians and special guest performers.",
                    image: "https://images.unsplash.com/photo-1415201364774-f6f0bb35f28f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                    coordinates: { lat: 40.7302, lng: -74.0005 }
                }
            ];

            // Initialize the map
            let map;
            let markers = [];

            // Function to format date in a more readable format
            function formatDate(dateString) {
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                return new Date(dateString).toLocaleDateString('en-US', options);
            }

            // Function to create event cards
            function createEventCard(event) {
                const formattedDate = formatDate(event.date);
                
                return `
                    <article class="event-card">
                        <img src="${event.image}" alt="Event: ${event.title}" class="event-image">
                        <div class="event-details">
                            <span class="event-category">${event.category.charAt(0).toUpperCase() + event.category.slice(1)}</span>
                            <h3 class="event-title">${event.title}</h3>
                            
                            <div class="event-info" aria-label="Date and time">
                                <svg aria-hidden="true" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                                </svg>
                                ${formattedDate} at ${event.time}
                            </div>
                            
                            <div class="event-info" aria-label="Location">
                                <svg aria-hidden="true" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                                </svg>
                                ${event.location}, ${event.address}
                            </div>
                            
                            <p class="event-description">${event.description}</p>
                            
                            <a href="#" class="event-link" onclick="showEventDetails(${event.id}); return false;" aria-label="View details for ${event.title}">
                                View Details
                            </a>
                        </div>
                    </article>
                `;
            }

            // Function to display events
            function displayEvents(events) {
                const eventsContainer = document.getElementById('events-container');
                
                if (events.length === 0) {
                    eventsContainer.innerHTML = `
                        <div class="no-events">
                            <h3>No events found</h3>
                            <p>Try adjusting your filters to find events.</p>
                        </div>
                    `;
                    return;
                }
                
                let eventsHTML = '';
                events.forEach(event => {
                    eventsHTML += createEventCard(event);
                });
                
                eventsContainer.innerHTML = eventsHTML;
            }

            // Function to initialize the map
            function initMap() {
                // Create a simple placeholder for the map
                const mapContainer = document.getElementById('map-container');
                mapContainer.innerHTML = `
                    <div style="background-color: #e9ecef; height: 100%; display: flex; align-items: center; justify-content: center; text-align: center; padding: 20px;">
                        <div>
                            <h3>Interactive Map</h3>
                            <p>In a real implementation, this would be an interactive map showing event locations.</p>
                            <p>Event locations would be marked at the following coordinates:</p>
                            <ul style="list-style-type: none; padding: 0; margin-top: 15px; text-align: left;">
                                ${eventsData.map(event => `
                                    <li style="margin-bottom: 8px;">
                                        <strong>${event.title}</strong>: Lat ${event.coordinates.lat.toFixed(4)}, Lng ${event.coordinates.lng.toFixed(4)}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            }

            // Function to filter events
            function filterEvents() {
                const category = document.getElementById('category').value;
                const date = document.getElementById('date').value;
                const location = document.getElementById('location').value.toLowerCase();
                
                // Show loading indicator
                document.getElementById('loading').classList.add('active');
                
                // Simulate API call delay
                setTimeout(() => {
                    let filteredEvents = eventsData;
                    
                    if (category) {
                        filteredEvents = filteredEvents.filter(event => event.category === category);
                    }
                    
                    if (date) {
                        filteredEvents = filteredEvents.filter(event => event.date === date);
                    }
                    
                    if (location) {
                        filteredEvents = filteredEvents.filter(event => 
                            event.location.toLowerCase().includes(location) || 
                            event.address.toLowerCase().includes(location)
                        );
                    }
                    
                    displayEvents(filteredEvents);
                    
                    // Hide loading indicator
                    document.getElementById('loading').classList.remove('active');
                    
                    // Announce results to screen readers
                    const resultsAnnouncement = document.createElement('div');
                    resultsAnnouncement.setAttribute('aria-live', 'polite');
                    resultsAnnouncement.className = 'sr-only';
                    resultsAnnouncement.textContent = `Found ${filteredEvents.length} events matching your criteria.`;
                    document.body.appendChild(resultsAnnouncement);
                    
                    // Remove announcement after it's been read
                    setTimeout(() => {
                        document.body.removeChild(resultsAnnouncement);
                    }, 3000);
                    
                }, 500);
            }

            // Initialize the page
            displayEvents(eventsData);
            initMap();
            
            // Set up event listeners
            document.getElementById('filter-form').addEventListener('submit', function(e) {
                e.preventDefault();
                filterEvents();
            });

            // Add keyboard support for interactive elements
            document.querySelectorAll('.event-link').forEach(link => {
                link.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        this.click();
                    }
                });
            });
            
            // Make the function available globally for the onclick handlers
            window.showEventDetails = function(eventId) {
                const event = eventsData.find(e => e.id === eventId);
                if (!event) return;
                
                alert(`Event Details: ${event.title}\nDate: ${formatDate(event.date)}\nLocation: ${event.location}\n\n${event.description}`);
            };
        });
    </script>
</body>
</html>
