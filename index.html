<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Accessible Personal Blog - Articles, Comments and Search</title>
    <style>
        /* CSS Reset and Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Ensure all interactive elements have visible focus indicators */
        button:focus, 
        input:focus, 
        select:focus, 
        textarea:focus, 
        a:focus {
            outline: 3px solid #0066cc;
            outline-offset: 2px;
        }

        /* High contrast focus for dark backgrounds */
        .dark-bg button:focus, 
        .dark-bg a:focus {
            outline: 3px solid #ffffff;
        }

        /* Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #0066cc;
            color: white;
            padding: 8px;
            z-index: 100;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header Styles */
        header {
            background-color: #ffffff;
            padding: 20px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .site-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #333;
        }

        nav {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        nav a {
            margin-right: 20px;
            color: #0066cc;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 0;
        }

        nav a:hover {
            text-decoration: underline;
        }

        /* Search Form */
        .search-form {
            margin: 20px 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .search-form label {
            font-weight: 500;
            margin-right: 10px;
        }

        .search-form input {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            flex-grow: 1;
            min-width: 200px;
        }

        .search-form button {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .search-form button:hover {
            background-color: #0052a3;
        }

        /* Main Content */
        main {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        /* Blog Posts */
        .blog-posts {
            margin-bottom: 40px;
        }

        .post {
            margin-bottom: 40px;
            border-bottom: 1px solid #eee;
            padding-bottom: 30px;
        }

        .post:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .post-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #222;
        }

        .post-meta {
            color: #666;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .post-content {
            margin-bottom: 20px;
        }

        .post-image {
            max-width: 100%;
            height: auto;
            margin: 20px 0;
            border-radius: 4px;
        }

        /* Comments Section */
        .comments-section {
            margin-top: 30px;
        }

        .comments-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .comment {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .comment-author {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .comment-date {
            color: #666;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .comment-text {
            margin-bottom: 0;
        }

        /* Comment Form */
        .comment-form {
            margin-top: 30px;
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 4px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .required-field::after {
            content: " *";
            color: #cc0000;
        }

        .error-message {
            color: #cc0000;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        .submit-button {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .submit-button:hover {
            background-color: #0052a3;
        }

        /* No Results Message */
        .no-results {
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 4px;
            text-align: center;
            display: none;
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
            border-top: 1px solid #eee;
            color: #666;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .site-title {
                font-size: 1.8rem;
            }

            nav {
                flex-direction: column;
            }

            nav a {
                margin-bottom: 10px;
            }

            main {
                padding: 20px;
            }

            .post-title {
                font-size: 1.5rem;
            }
        }

        /* Accessibility: High contrast mode support */
        @media (forced-colors: active) {
            button, .submit-button {
                border: 2px solid currentColor;
            }
        }

        /* Loading indicator */
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }

        .loading::after {
            content: "Loading...";
            font-style: italic;
        }

        /* Visually hidden elements (for screen readers) */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header>
        <h1 class="site-title">My Personal Blog</h1>
        <nav role="navigation" aria-label="Main navigation">
            <a href="#" aria-current="page">Home</a>
            <a href="#">About</a>
            <a href="#">Categories</a>
            <a href="#">Contact</a>
        </nav>

        <form class="search-form" role="search" aria-label="Search blog posts">
            <label for="search-input">Search Posts:</label>
            <input 
                type="search" 
                id="search-input" 
                name="search" 
                placeholder="Enter keywords..."
                aria-describedby="search-instructions">
            <button type="submit" id="search-button">Search</button>
        </form>
        <div id="search-instructions" class="sr-only">
            Type keywords and press Enter or click the Search button to find posts
        </div>
    </header>

    <main id="main-content">
        <h2>Recent Blog Posts</h2>
        
        <div class="loading" id="loading-indicator" aria-live="polite"></div>
        
        <div class="no-results" id="no-results" aria-live="polite">
            <p>No posts found matching your search. Please try different keywords.</p>
        </div>

        <section class="blog-posts" id="blog-posts">
            <!-- Blog posts will be dynamically loaded here -->
        </section>

        <section class="comments-section" id="comments-section">
            <h2 class="comments-title">Comments</h2>
            <div id="comments-container">
                <!-- Comments will be dynamically loaded here -->
            </div>

            <div class="comment-form">
                <h3>Leave a Comment</h3>
                <form id="comment-form">
                    <div class="form-group">
                        <label for="name" class="required-field">Name</label>
                        <input 
                            type="text" 
                            id="name" 
                            name="name" 
                            required 
                            aria-describedby="name-error">
                        <div id="name-error" class="error-message">Please enter your name</div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="required-field">Email</label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            required 
                            aria-describedby="email-error">
                        <div id="email-error" class="error-message">Please enter a valid email address</div>
                    </div>
                    <div class="form-group">
                        <label for="comment" class="required-field">Comment</label>
                        <textarea 
                            id="comment" 
                            name="comment" 
                            required 
                            aria-describedby="comment-error"></textarea>
                        <div id="comment-error" class="error-message">Please enter your comment</div>
                    </div>
                    <button type="submit" class="submit-button">Submit Comment</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 My Personal Blog. All rights reserved.</p>
        <nav aria-label="Footer navigation">
            <a href="#">Privacy Policy</a> | 
            <a href="#">Terms of Service</a> | 
            <a href="#">Accessibility Statement</a>
        </nav>
    </footer>

    <script>
        // Sample blog post data
        const blogPosts = [
            {
                id: 1,
                title: "Getting Started with Web Accessibility",
                author: "Jane Smith",
                date: "October 15, 2023",
                content: `
                    <p>Web accessibility is about making websites usable for everyone, including people with disabilities. This post explores the basics of creating accessible web content.</p>
                    <p>The Web Content Accessibility Guidelines (WCAG) provide a framework for making web content more accessible. Following these guidelines helps ensure that your website can be used by people with various disabilities, including visual, auditory, physical, speech, cognitive, language, learning, and neurological disabilities.</p>
                    <h3>Key Principles of Web Accessibility</h3>
                    <p>WCAG is organized around four principles, often referred to as POUR:</p>
                    <ul>
                        <li><strong>Perceivable</strong>: Information and user interface components must be presentable to users in ways they can perceive.</li>
                        <li><strong>Operable</strong>: User interface components and navigation must be operable.</li>
                        <li><strong>Understandable</strong>: Information and the operation of user interface must be understandable.</li>
                        <li><strong>Robust</strong>: Content must be robust enough that it can be interpreted reliably by a wide variety of user agents, including assistive technologies.</li>
                    </ul>
                `,
                image: {
                    src: "https://via.placeholder.com/800x400",
                    alt: "A person using a screen reader to navigate a website, demonstrating web accessibility in action"
                }
            },
            {
                id: 2,
                title: "The Importance of Semantic HTML",
                author: "John Doe",
                date: "October 10, 2023",
                content: `
                    <p>Semantic HTML is the foundation of an accessible website. Using the right HTML elements for their intended purpose is crucial for assistive technologies.</p>
                    <p>When we use semantic HTML elements like <code>&lt;nav&gt;</code>, <code>&lt;article&gt;</code>, <code>&lt;section&gt;</code>, and <code>&lt;button&gt;</code>, we provide important context about the content to browsers and assistive technologies. This helps users understand the structure and purpose of different parts of the page.</p>
                    <h3>Benefits of Semantic HTML</h3>
                    <ul>
                        <li>Improved accessibility for screen reader users</li>
                        <li>Better SEO performance</li>
                        <li>Easier code maintenance</li>
                        <li>More consistent rendering across browsers</li>
                    </ul>
                    <p>Remember, a <code>&lt;div&gt;</code> is just a container with no inherent meaning, while a <code>&lt;nav&gt;</code> explicitly tells users and browsers that the content inside is navigation.</p>
                `,
                image: {
                    src: "https://via.placeholder.com/800x400",
                    alt: "Code editor showing semantic HTML structure with properly nested heading elements and semantic tags"
                }
            },
            {
                id: 3,
                title: "Creating Accessible Forms",
                author: "Alex Johnson",
                date: "October 5, 2023",
                content: `
                    <p>Forms are often the most challenging elements to make accessible. This post covers best practices for creating forms that everyone can use.</p>
                    <p>Accessible forms start with proper labeling. Every input field should have an associated <code>&lt;label&gt;</code> element that clearly describes what information is expected. This helps screen reader users understand the purpose of each field.</p>
                    <h3>Key Form Accessibility Tips</h3>
                    <ul>
                        <li>Use explicit labels for all form controls</li>
                        <li>Group related fields with <code>&lt;fieldset&gt;</code> and <code>&lt;legend&gt;</code></li>
                        <li>Provide clear error messages that suggest how to fix issues</li>
                        <li>Ensure forms can be completed using keyboard only</li>
                        <li>Use appropriate input types (email, tel, date, etc.)</li>
                    </ul>
                    <p>Remember to test your forms with keyboard navigation and screen readers to ensure they're truly accessible to all users.</p>
                `,
                image: {
                    src: "https://via.placeholder.com/800x400",
                    alt: "A well-designed form with clearly labeled fields, showing proper form structure and validation messages"
                }
            }
        ];

        // Sample comments data
        const comments = [
            {
                id: 1,
                postId: 1,
                author: "Michael Brown",
                date: "October 16, 2023",
                text: "Great introduction to web accessibility! I've been trying to improve my website's accessibility and this gives me a good starting point."
            },
            {
                id: 2,
                postId: 1,
                author: "Sarah Lee",
                date: "October 17, 2023",
                text: "I appreciate the clear explanation of the POUR principles. It makes accessibility seem less intimidating for beginners."
            },
            {
                id: 3,
                postId: 2,
                author: "David Wilson",
                date: "October 11, 2023",
                text: "I've been guilty of div-itis in the past. This article convinced me to pay more attention to semantic HTML."
            }
        ];

        // DOM Elements
        const blogPostsContainer = document.getElementById('blog-posts');
        const commentsContainer = document.getElementById('comments-container');
        const commentForm = document.getElementById('comment-form');
        const searchForm = document.querySelector('.search-form');
        const searchInput = document.getElementById('search-input');
        const loadingIndicator = document.getElementById('loading-indicator');
        const noResultsMessage = document.getElementById('no-results');

        // Function to display blog posts
        function displayBlogPosts(posts) {
            blogPostsContainer.innerHTML = '';
            
            if (posts.length === 0) {
                noResultsMessage.style.display = 'block';
                return;
            }
            
            noResultsMessage.style.display = 'none';
            
            posts.forEach(post => {
                const postElement = document.createElement('article');
                postElement.className = 'post';
                postElement.setAttribute('aria-labelledby', `post-title-${post.id}`);
                
                postElement.innerHTML = `
                    <h3 class="post-title" id="post-title-${post.id}">${post.title}</h3>
                    <div class="post-meta">
                        <span>By ${post.author}</span> | 
                        <time datetime="${formatDateForDateTime(post.date)}">${post.date}</time>
                    </div>
                    <div class="post-content">
                        ${post.content}
                        ${post.image ? `<img src="${post.image.src}" alt="${post.image.alt}" class="post-image">` : ''}
                    </div>
                    <button class="view-comments-button" 
                            aria-expanded="false" 
                            aria-controls="comments-for-${post.id}" 
                            data-post-id="${post.id}">
                        View Comments
                    </button>
                    <div id="comments-for-${post.id}" class="post-comments" hidden></div>
                `;
                
                blogPostsContainer.appendChild(postElement);
                
                // Add event listeners to the view comments button
                const viewCommentsButton = postElement.querySelector('.view-comments-button');
                viewCommentsButton.addEventListener('click', handleInteraction);
                viewCommentsButton.addEventListener('keydown', handleInteraction);
            });
        }

        // Function to display comments for a specific post
        function displayComments(postId, commentsContainer) {
            const postComments = comments.filter(comment => comment.postId === postId);
            
            if (postComments.length === 0) {
                commentsContainer.innerHTML = '<p>No comments yet. Be the first to comment!</p>';
                return;
            }
            
            commentsContainer.innerHTML = '';
            
            postComments.forEach(comment => {
                const commentElement = document.createElement('div');
                commentElement.className = 'comment';
                commentElement.innerHTML = `
                    <h4 class="comment-author">${comment.author}</h4>
                    <div class="comment-date">
                        <time datetime="${formatDateForDateTime(comment.date)}">${comment.date}</time>
                    </div>
                    <p class="comment-text">${comment.text}</p>
                `;
                commentsContainer.appendChild(commentElement);
            });
        }

        // Helper function to format date for datetime attribute
        function formatDateForDateTime(dateString) {
            const date = new Date(dateString);
            return date.toISOString().split('T')[0]; // Returns YYYY-MM-DD
        }

        // Function to handle form submission
        function handleCommentSubmission(event) {
            event.preventDefault();
            
            // Reset error messages
            document.querySelectorAll('.error-message').forEach(el => {
                el.style.display = 'none';
            });
            
            // Get form values
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const commentText = document.getElementById('comment').value.trim();
            
            // Validate form
            let isValid = true;
            
            if (!name) {
                document.getElementById('name-error').style.display = 'block';
                isValid = false;
            }
            
            if (!email || !isValidEmail(email)) {
                document.getElementById('email-error').style.display = 'block';
                isValid = false;
            }
            
            if (!commentText) {
                document.getElementById('comment-error').style.display = 'block';
                isValid = false;
            }
            
            if (!isValid) {
                return;
            }
            
            // Create new comment (in a real app, this would be sent to a server)
            const newComment = {
                id: comments.length + 1,
                postId: 1, // Default to first post for this demo
                author: name,
                date: new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }),
                text: commentText
            };
            
            // Add to comments array
            comments.push(newComment);
            
            // Update comments display
            displayComments(1, commentsContainer);
            
            // Reset form
            commentForm.reset();
            
            // Provide feedback to user
            const successMessage = document.createElement('div');
            successMessage.setAttribute('role', 'alert');
            successMessage.className = 'success-message';
            successMessage.textContent = 'Your comment has been added successfully!';
            commentForm.appendChild(successMessage);
            
            // Remove success message after 3 seconds
            setTimeout(() => {
                successMessage.remove();
            }, 3000);
        }

        // Helper function to validate email
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // Function to handle search
        function handleSearch(event) {
            event.preventDefault();
            
            const searchTerm = searchInput.value.trim().toLowerCase();
            
            if (!searchTerm) {
                displayBlogPosts(blogPosts);
                return;
            }
            
            // Show loading indicator
            loadingIndicator.style.display = 'block';
            blogPostsContainer.style.display = 'none';
            
            // Simulate search delay
            setTimeout(() => {
                const filteredPosts = blogPosts.filter(post => {
                    return post.title.toLowerCase().includes(searchTerm) || 
                           post.content.toLowerCase().includes(searchTerm) ||
                           post.author.toLowerCase().includes(searchTerm);
                });
                
                // Hide loading indicator
                loadingIndicator.style.display = 'none';
                blogPostsContainer.style.display = 'block';
                
                // Display filtered posts
                displayBlogPosts(filteredPosts);
                
                // Announce search results to screen readers
                const resultsCount = filteredPosts.length;
                const resultsAnnouncement = document.createElement('div');
                resultsAnnouncement.setAttribute('role', 'status');
                resultsAnnouncement.setAttribute('aria-live', 'polite');
                resultsAnnouncement.className = 'sr-only';
                resultsAnnouncement.textContent = `${resultsCount} ${resultsCount === 1 ? 'post' : 'posts'} found for "${searchTerm}"`;
                document.body.appendChild(resultsAnnouncement);
                
                // Remove announcement after it's been read
                setTimeout(() => {
                    resultsAnnouncement.remove();
                }, 3000);
            }, 500);
        }

        // Function to handle both mouse and keyboard interactions
        function handleInteraction(event) {
            if (event.type === 'click' || 
                (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' '))) {
                
                if (event.type === 'keydown') {
                    event.preventDefault(); // Prevent scrolling on space key
                }
                
                const button = event.currentTarget;
                const postId = parseInt(button.getAttribute('data-post-id'));
                const commentsSection = document.getElementById(`comments-for-${postId}`);
                const isExpanded = button.getAttribute('aria-expanded') === 'true';
                
                if (isExpanded) {
                    // Hide comments
                    commentsSection.hidden = true;
                    button.setAttribute('aria-expanded', 'false');
                    button.textContent = 'View Comments';
                } else {
                    // Show comments
                    commentsSection.hidden = false;
                    button.setAttribute('aria-expanded', 'true');
                    button.textContent = 'Hide Comments';
                    
                    // Load comments
                    displayComments(postId, commentsSection);
                }
            }
        }

        // Initialize the page
        function init() {
            // Display blog posts
            displayBlogPosts(blogPosts);
            
            // Display comments for the first post
            displayComments(1, commentsContainer);
            
            // Add event listeners
            commentForm.addEventListener('submit', handleCommentSubmission);
            searchForm.addEventListener('submit', handleSearch);
            
            // Add form validation
            const formInputs = document.querySelectorAll('#comment-form input, #comment-form textarea');
            formInputs.forEach(input => {
                input.addEventListener('blur', function() {
                    validateInput(this);
                });
                
                input.addEventListener('input', function() {
                    if (this.getAttribute('aria-invalid') === 'true') {
                        validateInput(this);
                    }
                });
            });
        }

        // Validate individual form inputs
        function validateInput(input) {
            const errorElement = document.getElementById(`${input.id}-error`);
            let isValid = true;
            
            if (input.hasAttribute('required') && !input.value.trim()) {
                errorElement.style.display = 'block';
                isValid = false;
            } else if (input.type === 'email' && !isValidEmail(input.value.trim())) {
                errorElement.style.display = 'block';
                isValid = false;
            } else {
                errorElement.style.display = 'none';
            }
            
            input.setAttribute('aria-invalid', !isValid);
            return isValid;
        }

        // Initialize the page when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
